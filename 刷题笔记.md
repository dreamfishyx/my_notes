##### SortedList

1. SortedList 是 Python 中 sortedcontainers 模块提供的一个数据结构，它是一个有序的列表，支持高效的插入、删除和查找操作。它的设计目标是提供类似于 Python 内置 list 的接口，同时保持元素的有序性。

2. SortedList 的底层实现基于以下几个关键点：

   - 分段有序数组：SortedList 将数据分成多个小的有序数组（称为段），每个段的大小适中，便于快速查找和插入。
   - 二分查找：在插入或查找元素时，使用二分查找算法快速定位元素应该插入的位置。
   - 动态调整：当某个段变得过大时，SortedList 会自动将其拆分成更小的段，以保持操作的效率。

3. 首先需要安装 sortedcontainers 模块：`pip install sortedcontainers`

4. 在普通的动态数组中，插入一个元素时，可能需要移动大量的元素。在 SortedList 中，数据被分成多个段，每个段的大小是 O(√n)。插入新元素时，只需要在某个段内部移动元素，移动的次数最多是 O(√n)。

5. SortedList 默认按照元素的自然顺序进行排序。对于数字类型，按升序排列；对于字符串类型，按字典序排列。如果需要自定义排序规则，可以通过 `key` 参数指定一个处理函数，按照函数返回结果排序。

   ```bash
   # 按绝对值排序
   sl = SortedList([-3, 1, -4, 2], key=abs)
   print(sl)  # 输出: SortedList([1, 2, -3, -4])
   ```

6. 使用方法:

   1. `add`插入
   2. `discard`删除
   3. `irange`范围查询
   4. `update`合并





##### defaultdict

defaultdict 是 Python 标准库 collections 模块中的一个类，它是 dict 的一个子类。它的特点是：

- 当访问一个不存在的键时，defaultdict 会自动调用指定的工厂函数，生成一个默认值，并将该键值对添加到字典中。
- 这样可以避免在访问不存在的键时抛出 KeyError 异常。

```python
map = defaultdict(SortedList)
map[apple].add(20)
```





##### 优先队列









##### 平衡树









